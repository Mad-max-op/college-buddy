<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <title>CollegeBuddy</title>
  </head>
  <body>
    <form name="google-sheet" method="post">
      <img class="college" src="assets/nhce_bg.jpg" alt="image not found" />
      <div class="flexbox">
        <img class="logo" src="assets/logo.png" alt="image not found" />
        <div class="login-box">
          <label>NAME</label>
          <input
            id="name"
            class="box"
            name="Name"
            type="text"
            placeholder="Enter Name"
            required
          />
          <label>USN</label>
          <input
            id="usn"
            class="box"
            type="text"
            placeholder="Enter Usn"
            name="Usn"
            required
          />
          <input type="text" class="data" name="Ip" id="ip" />
          <div class="login-button-container">
            <input
              type="submit"
              value="login"
              name="submit"
              id="login"
              class="login-button"
              onclick="document.location='/main/index.html'"
            />
          </div>
        </div>
      </div>
    </form>
    <script>
      var input = document.getElementById("usn");
      input.addEventListener("keypress", function (event) {
        if (event.key === "Enter") {
          event.preventDefault();
          document.getElementById("login").click();
        }
      });

      const scriptURL =
        "https://script.google.com/macros/s/AKfycbyG9ZuZ0bAict3ChhlCYhJS2Tkx58eKYiG8qCiVq0l5PmrrihkHWlOKXJbiQyrly-Glng/exec";
      const form = document.forms["google-sheet"];

      form.addEventListener("submit", (e) => {
        let name = document.getElementById("name").value;
        e.preventDefault();
        fetch(scriptURL, { method: "POST", body: new FormData(form) })
          .then((response) => alert("Hola " + name))
          .catch((error) => console.error("Error!", error.message));
        document.location("https://youtube.com");
      });

      var a = document.getElementById("ip");
      fetch("https://api.ipify.org")
        .then((res) => res.text())
        .then((ip) => {
          a.value = ip;
        });
    </script>
  </body>
</html>
